<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>H.F.T Tree ğŸ„</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
body {
  background: linear-gradient(135deg, #0a291f 0%, #0d3527 30%, #0c3b2e 100%);
  color: #fff;
  min-height: 100vh;
  padding: 15px;
  text-align: center;
  overflow-x: hidden;
  position: relative;
}
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 20%),
    radial-gradient(circle at 80% 70%, rgba(255, 20, 147, 0.05) 0%, transparent 20%),
    radial-gradient(circle at 40% 80%, rgba(0, 255, 255, 0.05) 0%, transparent 20%);
  z-index: -1;
}
.snow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}
.flake {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.7;
}
@keyframes fall {
  0% { transform: translateY(-100px) rotate(0deg); }
  100% { transform: translateY(100vh) rotate(360deg); }
}
.container {
  max-width: 1500px;
  margin: 0 auto;
  width: 100%;
}
header {
  margin-bottom: 20px;
  padding: 15px 20px;
  background: rgba(10, 40, 30, 0.7);
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 215, 0, 0.1);
  position: relative;
  overflow: hidden;
}
h1 {
  font-size: clamp(1.8rem, 6vw, 3rem);
  margin-bottom: 10px;
  color: #ffd700;
  text-shadow: 0 2px 8px rgba(255, 215, 0, 0.5);
}
.subtitle {
  font-size: clamp(1rem, 3.5vw, 1.3rem);
  color: #c9f0dd;
  margin-bottom: 15px;
}
.instructions {
  background: rgba(20, 60, 45, 0.6);
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 15px;
  border-right: 4px solid #ffd700;
}
.content {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
  align-items: flex-start;
}
.tree-container {
  flex: 1;
  min-width: 300px;
  max-width: 600px;
  position: relative;
  padding: 15px;
  background: rgba(10, 40, 30, 0.5);
  border-radius: 15px;
  border: 1px solid rgba(255, 215, 0, 0.1);
}
.tree {
  position: relative;
  width: 100%;
  height: 600px;
  margin: 0 auto;
  filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.5));
}

/* Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© - ØªØ­Ø³ÙŠÙ† Ù„Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© */
.tree-trunk {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 100px;
  background: linear-gradient(to right, #8B4513, #A0522D, #8B4513);
  border-radius: 5px;
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
  z-index: 1;
}

.tree-layer-1 {
  position: absolute;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 200px solid transparent;
  border-right: 200px solid transparent;
  border-bottom: 300px solid #0a7e3a;
  z-index: 2;
}

.tree-layer-2 {
  position: absolute;
  bottom: 250px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 150px solid transparent;
  border-right: 150px solid transparent;
  border-bottom: 250px solid #0b8c41;
  z-index: 3;
}

.tree-layer-3 {
  position: absolute;
  bottom: 380px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 100px solid transparent;
  border-right: 100px solid transparent;
  border-bottom: 200px solid #0c9a48;
  z-index: 4;
}

/* Ø£Ø¶ÙˆØ§Ø¡ Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© */
.tree-lights {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 5;
  pointer-events: none;
}

.light {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  filter: blur(0.3px);
  animation: twinkle 0.3s infinite alternate;
  box-shadow: 0 0 4px currentColor;
}

@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(0.5); }
  100% { opacity: 1; transform: scale(1); }
}

.tree-star {
  position: absolute;
  color: gold;
  font-size: 100px;
  text-shadow: 0 0 20px gold;
  animation: starGlow 3s infinite alternate;
  z-index: 10;
  top: -45px;
  left: 50%;
  transform: translateX(-50%);
}
@keyframes starGlow {
  0% { filter: drop-shadow(0 0 5px gold); }
  100% { filter: drop-shadow(0 0 30px gold); }
}

/* Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ø£ØµÙ„ÙŠØ© - Ù…ØªØ¬Ø§ÙˆØ¨Ø© Ù…Ø¹ ØªØ¹Ø¯ÙŠÙ„ Ø·ÙÙŠÙ */
.gifts-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}
.gift {
  position: absolute;
  width: 56px;
  height: 56px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 20;
  transform: translate(-50%, -50%);
  animation: gentleSwing 10s infinite ease-in-out;
  animation-delay: calc(var(--gift-delay) * 0.3s);
  background: transparent !important;
}
@keyframes gentleSwing {
  0%, 100% { transform: translate(-50%, -50%) rotate(-3deg); }
  50% { transform: translate(-50%, -50%) rotate(3deg); }
}
.gift:hover {
  transform: translate(-50%, -50%) scale(1.35) translateY(-6px);
  z-index: 30;
  filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.8));
  animation-play-state: paused;
}
.gift.opened {
  opacity: 0.9;
  filter: brightness(0.9);
}
.gift.completed {
  opacity: 0.5;
  filter: brightness(0.4) saturate(0.4);
  transform: translate(-50%, -50%) scale(0.8);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  animation: gentleSwingSlow 15s infinite ease-in-out;
}
@keyframes gentleSwingSlow {
  0%, 100% { transform: translate(-50%, -50%) scale(0.8) rotate(-2deg); }
  50% { transform: translate(-50%, -50%) scale(0.8) rotate(2deg); }
}
.gift.completed:hover {
  transform: translate(-50%, -50%) scale(0.9) translateY(-5px);
  filter: brightness(0.6) saturate(0.6);
}

.tasks-container {
  flex: 1;
  min-width: 300px;
  max-width: 500px;
  background: rgba(10, 40, 30, 0.7);
  border-radius: 15px;
  padding: 20px;
  border: 1px solid rgba(255, 215, 0, 0.1);
  max-height: 600px;
  overflow-y: auto;
  /* Ù…Ù†Ø¹ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Øµ ØªØ¬Ù†Ø¨Ø§Ù‹ Ù„Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
}
.tasks-title {
  font-size: clamp(1.5rem, 4.5vw, 2rem);
  color: #ffd700;
  margin-bottom: 20px;
}
.task {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  padding: 14px;
  margin-bottom: 12px;
  text-align: right;
  transition: all 0.3s ease;
  border-right: 4px solid transparent;
  cursor: pointer;
  /* Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  -webkit-tap-highlight-color: rgba(10, 40, 30, 0.7);
  outline: none;
}
.task:hover {
  background: rgba(255, 255, 255, 0.15);
  transform: translateX(-5px);
}
.task.completed {
  border-right-color: #4CAF50;
  background: rgba(76, 175, 80, 0.1);
}
.task-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.task-number {
  background: linear-gradient(135deg, #ffd700, #ff9800);
  color: #333;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}
.task-title {
  font-weight: bold;
  font-size: 1.1rem;
  color: #ffd700;
}
.task-description {
  color: #e0f7e9;
  font-size: 0.9rem;
}
.task-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  padding: 15px;
}
.modal-content {
  background: linear-gradient(135deg, #0d3527 0%, #1a5c48 100%);
  width: 100%;
  max-width: 500px;
  border-radius: 15px;
  padding: 25px 20px;
  text-align: center;
  position: relative;
  border: 1px solid rgba(255, 215, 0, 0.3);
}
.close-modal {
  position: absolute;
  top: 15px;
  left: 15px;
  background: rgba(255, 255, 255, 0.15);
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.modal-icon {
  font-size: 3rem;
  color: #ffd700;
  margin-bottom: 20px;
}
.modal-title {
  font-size: 1.8rem;
  color: #ffd700;
  margin-bottom: 15px;
}
.modal-description {
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 25px;
  color: #f0f0f0;
}
.complete-btn {
  background: linear-gradient(135deg, #4CAF50, #2E7D32);
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 50px;
  font-size: 1.1rem;
  cursor: pointer;
  margin-top: 10px;
  font-weight: bold;
  width: 90%;
  max-width: 250px;
  /* Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  -webkit-tap-highlight-color: rgba(76, 175, 80, 0.5);
}
.complete-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #3d8b40, #1B5E20);
}
.complete-btn:disabled {
  background: #6c757d;
  cursor: not-allowed;
}
.stats {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 25px;
  flex-wrap: wrap;
}
.stat-box {
  background: rgba(10, 40, 30, 0.7);
  padding: 15px 20px;
  border-radius: 12px;
  min-width: 120px;
  flex: 1;
  max-width: 200px;
  border: 1px solid rgba(255, 215, 0, 0.1);
}
.stat-value {
  font-size: 2rem;
  font-weight: bold;
  color: #ffd700;
  margin-bottom: 5px;
}
.stat-label {
  font-size: 1rem;
  color: #c9f0dd;
}
.reset-btn {
  background: linear-gradient(135deg, #FF5722, #D84315);
  color: white;
  border: none;
  padding: 14px 30px;
  border-radius: 50px;
  font-size: 1.1rem;
  cursor: pointer;
  margin-top: 25px;
  font-weight: bold;
  width: 90%;
  max-width: 250px;
  /* Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  -webkit-tap-highlight-color: rgba(255, 87, 34, 0.5);
}
.reset-btn:hover {
  background: linear-gradient(135deg, #E64A19, #BF360C);
}
footer {
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  color: #c9f0dd;
  font-size: 0.9rem;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 768px) {
  .tree {
    height: 500px;
  }
  
  .tree-layer-1 {
    border-left: 150px solid transparent;
    border-right: 150px solid transparent;
    border-bottom: 250px solid #0a7e3a;
    bottom: 80px;
  }
  
  .tree-layer-2 {
    border-left: 110px solid transparent;
    border-right: 110px solid transparent;
    border-bottom: 200px solid #0b8c41;
    bottom: 210px;
  }
  
  .tree-layer-3 {
    border-left: 70px solid transparent;
    border-right: 70px solid transparent;
    border-bottom: 150px solid #0c9a48;
    bottom: 320px;
  }
  
  .tree-trunk {
    width: 50px;
    height: 80px;
  }
  
  .gift {
    width: 45px;
    height: 45px;
  }
  
  .tree-star {
    font-size: 50px;
    top: 20px;
  }
  
  .light {
    width: 4px;
    height: 4px;
  }
}

@media (max-width: 480px) {
  .tree {
    height: 400px;
  }
  
  .tree-layer-1 {
    border-left: 100px solid transparent;
    border-right: 100px solid transparent;
    border-bottom: 200px solid #0a7e3a;
    bottom: 60px;
  }
  
  .tree-layer-2 {
    border-left: 75px solid transparent;
    border-right: 75px solid transparent;
    border-bottom: 150px solid #0b8c41;
    bottom: 170px;
  }
  
  .tree-layer-3 {
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-bottom: 100px solid #0c9a48;
    bottom: 260px;
  }
  
  .tree-trunk {
    width: 40px;
    height: 60px;
  }
  
  .gift {
    width: 35px;
    height: 35px;
  }
  
  .tree-star {
    font-size: 40px;
    top: 15px;
  }
  
  .content {
    flex-direction: column;
    align-items: center;
  }
  
  .tree-container, .tasks-container {
    width: 100%;
    max-width: 100%;
  }
  
  .light {
    width: 3px;
    height: 3px;
  }
}

/* Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¹Ø¯Ø© Ù„ØªØµØ­ÙŠØ­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
:focus {
  outline: none;
}
</style>
</head>
<body>
<div class="snow" id="snow"></div>
<div class="container">
<header>
  <h1><i class="fas fa-tree"></i> H.F.T Tree </h1>
  <p class="subtitle">Ø§ÙØªØ­ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ùˆ Ø´ÙˆÙ Ø§ÙŠÙ‡ Ø§Ù„Ù„ÙŠ Ù…Ø³ØªÙ†ÙŠÙƒ Ø¬ÙˆØ§ ğŸ˜‰â™¥ï¸</p>
  <div class="instructions">
    <p><i class="fas fa-lightbulb"></i>Ù†ØµÙŠØ­Ø© Ù…Ù†ÙŠ Ø§Ù„Ø¹Ø¨ Ø¹Ø´Ø§Ù† Ù…ØªÙ†Ø¯Ù…Ø´ ğŸ˜</p>
  </div>
</header>
<div class="content">
  <div class="tree-container">
    <div class="tree">
      <div class="tree-layer-1"></div>
      <div class="tree-layer-2"></div>
      <div class="tree-layer-3"></div>
      <div class="tree-trunk"></div>
      <div class="tree-star">â˜…</div>
      <div class="tree-lights" id="treeLights"></div>
      <div class="gifts-container" id="giftsContainer"></div>
    </div>
  </div>
  <div class="tasks-container">
    <h2 class="tasks-title"><i class="fas fa-tasks"></i> ØªØ§Ø³ÙƒØ§Øª Ø§Ø´Ø·Ø± Ø§Ù„Ø´Ø·Ø§Ø·ÙŠØ± ğŸ¤©</h2>
    <div id="tasksList"></div>
  </div>
</div>
<div class="stats">
  <div class="stat-box">
    <div class="stat-value" id="openedGifts">0</div>
    <div class="stat-label">Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ù„ÙŠ ÙØªØ­ØªÙ‡Ø§ ğŸ¥°</div>
  </div>
  <div class="stat-box">
    <div class="stat-value" id="completedTasks">0</div>
    <div class="stat-label">ØªØ§Ø³ÙƒØ§ØªÙƒ Ø§Ù„Ø®Ù„ØµØ§Ù†Ø© â™¥ï¸</div>
  </div>
  <div class="stat-box">
    <div class="stat-value" id="remainingTasks">15</div>
    <div class="stat-label"> ØªØ§Ø³ÙƒØ§ØªÙƒ Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø©ğŸ™„</div>
  </div>
</div>
<button class="reset-btn" id="resetBtn"><i class="fas fa-redo"></i>Ø¹ÙŠØ¯ Ù…Ù† Ø§Ù„Ø§ÙˆÙ„ ğŸ™‚</button>
<div class="task-modal" id="taskModal">
  <div class="modal-content">
    <div class="close-modal" id="closeModal">
      <i class="fas fa-times"></i>
    </div>
    <div class="modal-icon" id="modalIcon">
      <i class="fas fa-gift"></i>
    </div>
    <h2 class="modal-title" id="modalTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©</h2>
    <p class="modal-description" id="modalDescription">ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø© Ø³ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§</p>
    <button class="complete-btn" id="completeTaskBtn"><i class="fas fa-check-circle"></i> Ø¯Ù† ÙŠØ§ Ø¨Ø§Ø´Ø§ </button>
  </div>
</div>
<footer>
  <p>âœ¨ made by H.F.T Developer âœ¨</p>
</footer>
</div>
<script>
const allTasks = [
  { title: "ØµÙˆØ±Ù„ÙŠ Ú¤Ø§ÙŠØ¨Ø³ Ø§Ù„ÙƒØ±ÙŠØ³Ù…Ø³ ÙÙŠ Ø§ÙˆØ¶ØªÙƒâ„ï¸ğŸ…ğŸ»", description: "â™¥ï¸ğŸ„", icon: "fas fa-heart" },
  { title: "Ù‡Ø§Øª/ÙŠ Ø­Ø§Ø¬Ø§Øª Ø­Ù„ÙˆØ© Ùˆ ÙˆØ²Ø¹Ù‡Ù… Ø¹Ù„ÙŠ ØµØ­Ø§Ø¨Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙˆØµÙˆØ±Ù„ÙŠğŸ™‚â€â†”ï¸ğŸ¥°â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-language" },
  { title: "ØµÙ„ÙŠ Ø§Ù„ØºØ±ÙˆØ¨ Ø§Ù†Ù‡Ø§Ø±Ø¯Ø©ğŸ™ğŸ»", description: "â™¥ï¸ğŸ„", icon: "fas fa-wind" },
  { title: "Ø´Ø¬Ø¹ Ø­Ø¯ Ù…Ù† ØµØ­Ø§Ø¨Ùƒ ÙˆØ°Ø§ÙƒØ±ÙˆØ§ Ø³ÙˆØ§ğŸ‘€â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-thumbs-up" },
  { title: "ØºÙŠØ± Ù…Ù„Ø§ÙŠÙ‡ Ø³Ø±ÙŠØ±Ùƒ ÙŠØ¨Ø·Ù„ğŸ˜‚ğŸƒğŸ»", description: "â™¥ï¸ğŸ„", icon: "fas fa-hands-helping" },
  { title: "Ø°Ø§ÙƒØ± Ø³Ø§Ø¹ØªÙŠÙ† Ù…ØªÙˆØ§ØµÙ„ÙŠÙ† Ø¹Ø´Ø§Ù† Ù†Ù‚ÙÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ Ø¬Ø§ÙŠğŸ™‚â€â†”ï¸â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-newspaper" },
  { title: "Ø§Ø¹Ù…Ù„ Ù…Ø´Ø±ÙˆØ¨ Ù„Ù„Ø¨ÙŠØª ÙƒÙ„Ùˆ ÙˆØµÙˆØ±Ù„ÙŠğŸ˜‚ğŸƒğŸ»", description: "â™¥ï¸ğŸ„", icon: "fas fa-desktop" },
  { title: "Ø¬Ø±Ø¨ ØªØ±Ø³Ù… Ø´Ø¬Ø±Ø© Ø§Ù„ÙƒØ±ÙŠØ³Ù…Ø³ Ø§Ùˆ Ø³Ø§Ù†ØªØ§ğŸ…ğŸ»ğŸ¥ºâ™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-phone-alt" },
  { title: "Ø´Ø§Ø±Ùƒ Ø®Ø·ÙˆØ· Ø¨Ø§ÙƒØªØ± Ø¢ÙŠÙ‡ Ø¨ØªØ­Ø¨Ù‡Ø§ğŸ™ğŸ»â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-brain" },
  { title: "Ø®Ø¯ Ø®Ù„ÙˆØ© Ù…Ø¹ Ù†ÙØ³Ùƒ ÙˆØ´ÙˆÙ ÙˆØµÙ„Øª ÙÙŠÙ† ÙÙŠ Ø¹Ù„Ø§Ù‚ØªÙƒ Ù…Ø¹ Ø±Ø¨Ù†Ø§ğŸ¥°â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-bullseye" },
  { title: "Ù‚Ø¹Ø¯Ø© Ù‡Ø§Ø¯ÙŠÙ‡ ÙƒØ¯Ø§ ÙˆÙ†ÙƒØªØ¨ Ø§Ø­Ù„Ø§Ù… Ø§Ù„Ø³Ù†Ù‡ Ø§Ù„Ø¬Ø§ÙŠÙ‡ğŸŒŸğŸŒ¿â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-memory" },
  { title: "ØµÙˆØ±Ø© Ù…Ø¹ Ø¯ÙØ¹ØªÙƒğŸ¥°â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-laugh" },
  { title: "Ø§Ø¨Ø¹Øª Ù„Ø­Ø¯ Ù…Ù† ØµØ­Ø§Ø¨Ùƒ Ú¤ÙˆÙŠØ³ ØªÙ‚ÙˆÙ„Ù‡ ÙÙŠÙ‡ ÙƒÙ„Ù…Ù‡ Ø­Ù„ÙˆØ© ğŸŒ¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-couch" },
  { title: "Ø´Ø§Ø±Ùƒ Ø®Ø·ÙˆØ· Ø¨Ø§ÙƒØªØ± Ø­Ø§Ø¬Ù‡ Ø­Ù„ÙˆØ© Ø­ØµÙ„Øª ÙÙŠ Ø§Ø³Ø¨ÙˆØ¹ÙƒğŸŒ¿ğŸ¥³", description: "â™¥ï¸ğŸ„", icon: "fas fa-spa" },
  { title: "Ù†ØªÙƒÙ„Ù… Ù…Ø¹ Ø±Ø¨Ù†Ø§ ÙÙŠ Ø­Ø§Ø¬Ù‡ Ù…Ø¶Ø§ÙŠÙ‚Ø§Ù†Ø§â™¥ï¸", description: "â™¥ï¸ğŸ„", icon: "fas fa-smile" }
];
const TOTAL_TASKS = 15;
let userData = JSON.parse(localStorage.getItem('christmasTreeUserData'));
if (!userData || userData.tasksAssignment.length !== TOTAL_TASKS) {
  initializeUserData();
}

const giftsContainer = document.getElementById('giftsContainer');
const tasksList = document.getElementById('tasksList');
const taskModal = document.getElementById('taskModal');
const closeModal = document.getElementById('closeModal');
const modalTitle = document.getElementById('modalTitle');
const modalDescription = document.getElementById('modalDescription');
const modalIcon = document.getElementById('modalIcon');
const completeTaskBtn = document.getElementById('completeTaskBtn');
const openedGiftsElement = document.getElementById('openedGifts');
const completedTasksElement = document.getElementById('completedTasks');
const remainingTasksElement = document.getElementById('remainingTasks');
const resetBtn = document.getElementById('resetBtn');
const treeLights = document.getElementById('treeLights');
const snowContainer = document.getElementById('snow');
let currentTaskIndex = null;

function createSnow() {
  const snowflakes = window.innerWidth < 480 ? 50 : 80;
  
  for (let i = 0; i < snowflakes; i++) {
    const flake = document.createElement('div');
    flake.classList.add('flake');
    flake.style.width = `${Math.random() * 4 + 2}px`;
    flake.style.height = flake.style.width;
    flake.style.left = `${Math.random() * 100}%`;
    flake.style.top = `${Math.random() * 100}%`;
    flake.style.opacity = Math.random() * 0.5 + 0.3;
    flake.style.animation = `fall ${Math.random() * 5 + 5}s linear infinite`;
    flake.style.animationDelay = `${Math.random() * 5}s`;
    snowContainer.appendChild(flake);
  }
}

function createTreeLights() {
  treeLights.innerHTML = '';
  const colors = ['#ff0000', '#00ff00', '#ffff00', '#ff00ff', '#00ffff', '#ff8000'];

  const tree = document.querySelector('.tree');
  if (!tree) return;

  const treeRect = tree.getBoundingClientRect();
  const treeTop = treeRect.top + window.scrollY;
  const treeLeft = treeRect.left + window.scrollX;
  const treeWidth = treeRect.width;
  const treeHeight = treeRect.height;

  function getTriangleFromBorders(layerSelector) {
    const layer = document.querySelector(layerSelector);
    if (!layer) return null;

    const style = window.getComputedStyle(layer);
    const width = parseFloat(style.width) || 0;
    const height = parseFloat(style.height) || 0;
    const borderLeft = parseFloat(style.borderLeftWidth) || 0;
    const borderBottom = parseFloat(style.borderBottomWidth) || 0;
    const borderTop = parseFloat(style.borderTopWidth) || 0;
    const borderRight = parseFloat(style.borderRightWidth) || 0;

    const baseWidth = (borderLeft + borderRight);
    const triHeight = borderBottom;

    const layerRect = layer.getBoundingClientRect();
    const layerTop = layerRect.top + window.scrollY;
    const layerLeft = layerRect.left + window.scrollX;

    const apexX = layerLeft + layerRect.width / 2 - treeLeft;
    const apexY = layerTop - treeTop;

    const baseY = apexY + triHeight;
    const baseLeftX = apexX - baseWidth / 2;
    const baseRightX = apexX + baseWidth / 2;

    return {
      A: { x: apexX, y: apexY },
      B: { x: baseLeftX, y: baseY },
      C: { x: baseRightX, y: baseY }
    };
  }

  const tri1 = getTriangleFromBorders('.tree-layer-1');
  const tri2 = getTriangleFromBorders('.tree-layer-2');
  const tri3 = getTriangleFromBorders('.tree-layer-3');

  if (!tri1 || !tri2 || !tri3) return;

  const triangles = [tri1, tri2, tri3];
  const lightsPerTriangle = window.innerWidth < 480 ? [25, 20, 15] : [45, 35, 25];

  for (let t = 0; t < triangles.length; t++) {
    const tri = triangles[t];
    const numLights = lightsPerTriangle[t];

    for (let i = 0; i < numLights; i++) {
      let r1 = Math.random();
      let r2 = Math.random();
      if (r1 + r2 > 1) {
        r1 = 1 - r1;
        r2 = 1 - r2;
      }
      const x = tri.A.x + r1 * (tri.B.x - tri.A.x) + r2 * (tri.C.x - tri.A.x);
      const y = tri.A.y + r1 * (tri.B.y - tri.A.y) + r2 * (tri.C.y - tri.A.y);

      const light = document.createElement('div');
      light.classList.add('light');
      light.style.left = `${x}px`;
      light.style.top = `${y}px`;
      light.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      light.style.animationDelay = `${Math.random() * 2}s`;
      treeLights.appendChild(light);
    }
  }
}

function initializeUserData() {
  const shuffledTasks = [...allTasks];
  shuffleArray(shuffledTasks);
  userData = {
    tasksAssignment: shuffledTasks,
    openedGifts: Array(TOTAL_TASKS).fill(false),
    completedTasks: Array(TOTAL_TASKS).fill(false)
  };
  saveUserData();
}

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function saveUserData() {
  localStorage.setItem('christmasTreeUserData', JSON.stringify(userData));
}

function loadTreeAndTasks() {
  giftsContainer.innerHTML = '';
  // Ù†ÙØ³ Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ø£ØµÙ„ÙŠØ© ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ
  const giftPositions = [
    { top: '84%', left: '16%' },
    { top: '84%', left: '28%' },
    { top: '84%', left: '43%' },
    { top: '84%', left: '58%' },
    { top: '84%', left: '73%' },
    { top: '84%', left: '84%' },
    { top: '60%', left: '26%' },
    { top: '60%', left: '40%' },
    { top: '60%', left: '60%' },
    { top: '60%', left: '76%' },
    { top: '38%', left: '34%' },
    { top: '38%', left: '50%' },
    { top: '38%', left: '68%' },
    { top: '22%', left: '40%' },
    { top: '22%', left: '60%' }
  ];

  const symbols = ['ğŸ…', 'ğŸ', 'ğŸ­', 'ğŸ””'];

  for (let i = 0; i < TOTAL_TASKS; i++) {
    const gift = document.createElement('div');
    let giftClass = 'gift';
    if (userData.openedGifts[i]) giftClass += ' opened';
    if (userData.completedTasks[i]) giftClass += ' completed';
    gift.className = giftClass;
    gift.dataset.index = i;
    gift.style.setProperty('--gift-delay', i);
    gift.style.top = giftPositions[i].top;
    gift.style.left = giftPositions[i].left;
    
    if (userData.completedTasks[i]) {
      gift.style.transform = `translate(-50%, -50%) scale(0.8)`;
    }

    const giftSymbol = document.createElement('div');
    giftSymbol.style.fontSize = '45px';
    giftSymbol.style.zIndex = '2';
    giftSymbol.style.display = 'flex';
    giftSymbol.style.alignItems = 'center';
    giftSymbol.style.justifyContent = 'center';
    giftSymbol.style.width = '100%';
    giftSymbol.style.height = '100%';
    giftSymbol.textContent = symbols[i % symbols.length];

    gift.appendChild(giftSymbol);

    gift.addEventListener('click', () => openGift(i));
    gift.addEventListener('touchstart', function(e) {
      e.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù…Ø³
      this.style.webkitTapHighlightColor = 'transparent';
    }, {passive: false});
    
    giftsContainer.appendChild(gift);
  }

  tasksList.innerHTML = '';
  let hasCompletedTasks = false;
  
  for (let i = 0; i < TOTAL_TASKS; i++) {
    if (userData.completedTasks[i]) {
      hasCompletedTasks = true;
      const task = userData.tasksAssignment[i];
      const taskElement = document.createElement('div');
      taskElement.className = 'task completed';
      taskElement.dataset.index = i;
      taskElement.innerHTML = `
        <div class="task-header">
          <div class="task-number">${i+1}</div>
          <div class="task-title">${task.title}</div>
        </div>
        <div class="task-description">${task.description}</div>
      `;
      
      taskElement.addEventListener('click', () => openTaskModal(i));
      // Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
      taskElement.addEventListener('touchstart', function(e) {
        e.preventDefault();
        this.style.webkitTapHighlightColor = 'rgba(10, 40, 30, 0.7)';
      }, {passive: false});
      
      tasksList.appendChild(taskElement);
    }
  }
  
  if (!hasCompletedTasks) {
    tasksList.innerHTML = '<p style="color: #c9f0dd; font-style: italic; padding: 20px; text-align: center;">Ø§ØªÙ„Ø­Ù„Ø­ ÙŠØ§ Ø¨ÙŠÙ‡ Ùˆ Ø®Ù„Øµ Ø§Ù„ØªØ§Ø³ÙƒØ§Øª ğŸ‘º</p>';
  }
  
  updateStats();
}

function openGift(index) {
  if (!userData.openedGifts[index]) {
    userData.openedGifts[index] = true;
    saveUserData();
    loadTreeAndTasks();
  }
  openTaskModal(index);
}

function openTaskModal(index) {
  currentTaskIndex = index;
  const task = userData.tasksAssignment[index];
  modalTitle.textContent = task.title;
  modalDescription.textContent = task.description;
  modalIcon.innerHTML = `<i class="${task.icon}"></i>`;
  
  if (userData.completedTasks[index]) {
    completeTaskBtn.innerHTML = '<i class="fas fa-check-circle"></i>  Ø¯ÙŠ Ø¯Ù† ÙŠØ§ Ø¨Ø§Ø´Ø§ ğŸ˜';
    completeTaskBtn.style.background = '#6c757d';
    completeTaskBtn.disabled = true;
  } else {
    completeTaskBtn.innerHTML = '<i class="fas fa-check-circle"></i> Ø¯Ù† ÙŠØ§ Ø¨Ø§Ø´Ø§ğŸ¥±';
    completeTaskBtn.disabled = false;
    completeTaskBtn.style.background = 'linear-gradient(135deg, #4CAF50, #2E7D32)';
  }
  
  taskModal.style.display = 'flex';
}

function closeTaskModal() { 
  taskModal.style.display = 'none'; 
}

function completeTask() {
  if (currentTaskIndex !== null && !userData.completedTasks[currentTaskIndex]) {
    userData.completedTasks[currentTaskIndex] = true;
    saveUserData();
    loadTreeAndTasks();
    closeTaskModal();
  }
}

function updateStats() {
  const opened = userData.openedGifts.filter(Boolean).length;
  const completed = userData.completedTasks.filter(Boolean).length;
  openedGiftsElement.textContent = opened;
  completedTasksElement.textContent = completed;
  remainingTasksElement.textContent = TOTAL_TASKS - completed;
}

function resetSession() {
  if (confirm("Ø§ÙƒÙŠØ¯ Ù‡ØªØ¨Ø¯Ø§ Ù…Ù† Ø§Ù„Ø§ÙˆÙ„ØŸ Ø®Ù„ÙŠ Ø¨Ø§Ù„Ùƒ Ù„Ùˆ Ø¹Ù…Ù„Øª ÙƒØ¯Ù‡ ÙƒÙ„ ØªØ§Ø³ÙƒØ§ØªÙƒ Ù‡ØªØªØ´Ø§Ù„")) {
    localStorage.removeItem('christmasTreeUserData');
    initializeUserData();
    loadTreeAndTasks();
  }
}

closeModal.addEventListener('click', closeTaskModal);
completeTaskBtn.addEventListener('click', completeTask);
resetBtn.addEventListener('click', resetSession);
window.addEventListener('click', (e) => { if (e.target === taskModal) closeTaskModal(); });

document.addEventListener('DOMContentLoaded', () => {
  createSnow();
  createTreeLights();
  loadTreeAndTasks();
});

window.addEventListener('resize', () => {
  clearTimeout(window.resizeTimer);
  window.resizeTimer = setTimeout(() => {
    createTreeLights();
    loadTreeAndTasks();
  }, 100);
});

// Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø´Ø§Ø´Ø©
window.addEventListener('orientationchange', function() {
  setTimeout(() => {
    createTreeLights();
    loadTreeAndTasks();
  }, 300);
});
</script>
</body>
</html>